"use strict";(globalThis["webpackChunkimpredigital_frontend"]=globalThis["webpackChunkimpredigital_frontend"]||[]).push([[624],{4624:(o,t,e)=>{e.r(t),e.d(t,{default:()=>z});var a=e(3673),i=e(2323);const s=["onClick"],r={style:{"font-style":"italic"}};function l(o,t,e,l,d,n){const p=(0,a.up)("q-td"),c=(0,a.up)("q-tr"),h=(0,a.up)("q-table"),m=(0,a.up)("q-card-section"),u=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(u,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{title:"Principales 5 Emisores",rows:o.rows,columns:o.columns,"row-key":"name",style:{height:"400px"},"hide-pagination":""},{body:(0,a.w5)((t=>[(0,a.Wm)(c,{props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{key:"razonsocial",props:t,style:{display:"grid","text-align":"left",height:"51px"}},{default:(0,a.w5)((()=>[(0,a._)("span",{onClick:e=>o.goToReporte(t.row),style:{"font-weight":"bolder",width:"120px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden",cursor:"pointer"}},(0,i.zw)(t.row.razonsocial),9,s),(0,a._)("span",r,"RIF: "+(0,i.zw)(t.row.rif),1)])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"total",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.total),1)])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"iva",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.totalg),1)])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"reducido",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.totalr),1)])),_:2},1032,["props"]),(0,a.Wm)(p,{key:"igtf",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.row.totaligtf),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1})])),_:1})}e(5663);var d=e(4434),n=e(52),p=e.n(n),c=e(1488),h=e.n(c),m=e(5770),u=e.n(m);const w=u().endpoint_path_v2,f=(0,a.aZ)({name:"TableTop",props:["idtipodochijo","dateFrom","dateTo","idserviciohijo","changesede","idcodecomercialhijo"],data(){return{columns:[{name:"razonsocial",label:"Cliente emisor",align:"left",field:o=>o.razonsocial,format:o=>`${o}`},{name:"total",label:"Cantidad de documentos"},{name:"iva",label:"IVA"},{name:"reducido",label:"Reducido"},{name:"igtf",label:"IGTF"}],rows:[]}},methods:{goToReporte(o){this.changesede(o)},listarTop(){const o={idtipodocumento:this.idtipodochijo||void 0,idserviciosmasivo:this.idserviciohijo||void 0,idcodigocomercial:this.idcodecomercialhijo||void 0,desde:h()(this.dateFrom,"YYYY/MM/DD").format("YYYY-MM-DD"),hasta:h()(this.dateTo,"YYYY/MM/DD").format("YYYY-MM-DD")};p().post(w+"reporte/topclientes",o).then((async o=>{console.log(o.data);const t=o.data.data;this.rows=[];for(const e in t){const o={};o.cod=t[e].idserviciosmasivo,o.razonsocial=t[e].razonsocial,o.rif=t[e].rif,o.total=t[e].total,o.totalg=t[e].totalg||0,o.totalg=this.completarDecimales(o.totalg),o.totalr=t[e].totalr||0,o.totalr=this.completarDecimales(o.totalr),o.totaligtf=t[e].totaligtf||0,o.totaligtf=this.completarDecimales(o.totaligtf),this.rows.push(o)}})).catch((o=>{d.Z.create("Problemas al listar top cliente "+o)}))},completarDecimales(o){o=Intl.NumberFormat("de-DE").format(o.toFixed(2));const t=o.split(",");return o=1===t.length?o+",00":1===t[1].length?o+"0":o,o},updateTop(){"/dashboard"===this.$route.path&&(console.log(this.$route.path),this.listarTop())}},watch:{idtipodochijo:function(o){this.updateTop()},dateFrom:function(o){this.updateTop()},idserviciohijo:function(o){this.updateTop()},idcodecomercialhijo:function(o){this.updateTop()}},mounted(){this.updateTop(),setInterval((()=>{this.updateTop()}),14e3)}});var g=e(4260),T=e(151),v=e(5589),b=e(4993),k=e(8186),Y=e(3884),y=e(7518),_=e.n(y);const D=(0,g.Z)(f,[["render",l]]),z=D;_()(f,"components",{QCard:T.Z,QCardSection:v.Z,QTable:b.Z,QTr:k.Z,QTd:Y.Z})}}]);